# Generative AI System Design - Interview Handbook

---

## 1. GenAI System Design Framework

| Stage | Key Questions |
|-------|---------------|
| Business Goal | What is being generated? (text, code, chat, summaries, images) |
| Data Strategy | Where is knowledge coming from? (docs, APIs, DB, web, embeddings) |
| Model Strategy | Base LLM, fine-tuned model, or RAG? Local or cloud-hosted? |
| Retrieval Strategy | How do we fetch accurate and relevant information? |
| Reasoning Strategy | Chain-of-thought, tools, planning, agentics |
| Delivery Strategy | API, chatbot, IDE plugin, app, workflow assistant |
| Monitoring | Quality, latency, hallucination, cost, safety, privacy |

---

## 2. Core Components of a GenAI System

```

User ‚Üí Query Parser ‚Üí Retriever (Vector DB, BM25, Hybrid)
‚Üí LLM/Reranker ‚Üí Generation/Reasoning ‚Üí Guardrails
‚Üí Response Formatter ‚Üí Monitoring (Cost, Latency, Safety)

```

- **Knowledge Sources**: PDF, DB, APIs, CRM, Confluence, GitHub, Radars, Journals  
- **Retrieval Type**: Dense (Embeddings), Sparse (BM25), Hybrid, Graph  
- **LLM Type**: Proprietary (GPT, Claude), Open (LLaMA, Mistral), Fine-tuned, Domain-specific  
- **Serving**: Real-time, Batch, Edge, Offline, Streaming  

---

## 3. RAG (Retrieval-Augmented Generation) ‚Äî Design Strategy

| Feature | Options |
|---------|---------|
| Chunking | Semantic, sliding window, hierarchical |
| Embeddings | OpenAI, bge, Instructor, E5, Chroma |
| Retrieval | Top-k, MMR, hybrid, reranking |
| Reranker | Cross-encoder, ColBERT, LLM-based |
| Context Assembly | Metadata filtering, citation mapping |
| Hallucination Control | Confidence scoring, source-grounding, factuality check |

---

## 4. Agentic AI System Design

**Add Planning, Tool Use, and Dynamic Context**  

**Components:**
- Planner (task decomposition)
- Tool executor (SQL, search, API calls, browser, Python)
- Memory (short, long-term, episodic)
- Multi-agent orchestration (Manager, specialist agents)

**Flow:**

```

User task ‚Üí Planner ‚Üí Tool invocation (API/SQL)
‚Üí Intermediate reasoning ‚Üí Sub-agent collaboration
‚Üí Final response ‚Üí Verification ‚Üí User

```

---

## 5. Hallucination Reduction Strategies

| Technique | How it Works |
|-----------|--------------|
| Retrieval grounding | Always provide source evidence |
| Context validation | Fact-check using APIs/Web/DB |
| Fusion RAG | Merge knowledge from multiple retrievers |
| Confidence scoring | Compare multiple model outputs |
| Self-consistency | Generate multiple answers ‚Üí vote |
| Prompt-based safety | Use instructions, system delimiters |

---

## 6. Latency, Cost & Quality Optimization

| Constraint | Strategies |
|------------|------------|
| Latency | Prompt compression, caching, speculative decoding, distilled models |
| Cost | LoRA fine-tuning, quantization (4-bit, 8-bit), model routing |
| Accuracy | Retrieval tuning, domain fine-tuning, multi-pass reasoning |
| Scale | Sharding, vector clustering, ElasticSearch hybrid indexing |

---

## 7. Scaling GenAI in Production

| Component | Scaling Method |
|-----------|----------------|
| Vector DB | HNSW, IVF, FAISS, Pinecone, pgvector |
| Orchestration | Kubernetes, Ray, Airflow |
| Feature Store | Feast, Tecton |
| Monitoring | Weights & Biases, Arize, Prometheus |

---

## 8. Frequently Asked GenAI System Design Interview Questions

| Category | Questions |
|----------|-----------|
| RAG | Design a document QA system using RAG |
| Agents | Build a self-correcting, tool-using agent |
| Code | Design an AI coding assistant |
| Multimodal | Design a voice ‚Üí text ‚Üí image generator |
| Data | How to store embeddings? Update vector DB? |
| Scalability | Real-time GenAI for 10K QPS |
| Privacy | Build a GenAI system for healthcare domain |
| Evaluation | How to measure hallucination? Confidence score? |
| Optimization | Reduce latency in RAG? When to use caching? |
| Security | Prevent prompt injections & jailbreak attacks |

---

## Top Interview Frameworks (Easy Recall)

| Framework | Use |
|-----------|-----|
| MARRS | Model, Access, Retrieval, Reasoning, Safety |
| POSTMAN | Prompt, Orchestrator, Storage, Tools, Monitor, Agents, NLU |
| CASTLE | Context, Agents, Storage, Tools, Logic, Evaluation |
| DROPS | Data, Retrieval, Orchestration, Prompting, Safety |

---

## ü§ù Final Tip

When answering GenAI design questions, structure your response using:

**Problem ‚Üí Data ‚Üí Retrieval ‚Üí Model ‚Üí Reasoning ‚Üí Safety ‚Üí Evaluation ‚Üí Scaling**
